# Серверная часть приложения
Это серверная часть приложения, которая отвечает за обработку запросов от клиентской части и взаимодействие с базой данных. База данных развернута на vercel.com.
## Используемые технологии
- **NestJS**: Прогрессивный Node.js фреймворк для построения эффективных и масштабируемых серверных приложений.
- **TypeORM**: Объектно-реляционный маппер (ORM) для TypeScript и JavaScript (ES7, ES6, ES5).
- **PostgreSQL**: Объектно-реляционная база данных для хранения информации.
- **Docker**: Платформа для разработки, доставки и выполнения программного обеспечения с использованием контейнеризации. Позволяет упаковывать программы и их зависимости в контейнеры для легкого развертывания и управления средами разработки и производства.

Контроллер `ApplicationController` управляет операциями CRUD для сущностей `Application`. Он взаимодействует с `ApplicationService` для выполнения этих операций.

###  Установка и настройка
1. Склонируйте репозиторий на свой компьютер.
2. Перейдите в директорию проекта.
3. Установите зависимости, выполнив команду `npm install`.
### Запуск:
1. Откройте терминал.
2. Перейдите в директорию проекта.
3. Откройте терминал и создайте файл .env командой `npm run start:env`
4. Откройте новый терминал и запустите docker-container командой `docker-compose up --build`
5. Запустите сервер, выполнив команду запуска `npm start`.
4. Для дополнительной информации о содержании сервера, см. [README сервера](server/README.md).


## Маршруты

### GET /applications

- **Описание**: Получение списка всех заявок.
- **Ответ**: Возвращает массив объектов `Application`.
- **Ошибки**: Отсутствуют.

- **Method**: GET
- **URL**: `{{host}}/applications`
- **Headers**: None
- **Body**: None

### GET /applications/:id

- **Описание**: Получение заявки по её ID.
- **Параметры**:
  - `id` (number): ID заявки.
- **Ответ**: Возвращает объект `Application`.
- **Ошибки**:
  - `NotFoundException`: Если заявка с указанным ID не найдена.
  
- **Method**: GET
- **URL**: `{{host}}/applications/{{id}}`
- **Headers**: None
- **Body**: None


### POST /applications

- **Описание**: Создание новой заявки.
- **Тело запроса**:
  - `applicationData` (Partial<Application>): Частичные данные заявки. `receivedDate` автоматически устанавливается в текущую дату и время.
- **Ответ**: Возвращает новый объект `Application`.
- **Ошибки**: Отсутствуют.
- **Method**: POST
- **URL**: `{{host}}/applications`
- **Headers**: `Content-Type: application/json`
- **Body**:
  ```json
  {
    "clientCompanyName": "Example Company",
    "carrierName": "John Doe",
    "carrierPhone": "+1234567890",
    "comments": "Urgent delivery",
    "status": "new",
    "atiCode": "12345"
  }

### PATCH /applications/:id

- **Описание**: Обновление существующей заявки.
- **Параметры**:
  - `id` (number): ID заявки для обновления.
- **Тело запроса**:
  - `applicationData` (Application): Данные для обновления заявки.
- **Ответ**: Возвращает обновлённый объект `Application`.
- **Ошибки**:
  - `NotFoundException`: Если заявка с указанным ID не найдена.

- **Method**: PATCH
- **URL**: `{{host}}/applications/{{id}}`
- **Headers**: `Content-Type: application/json`
- **Body**:
  ```json
  {
    "comments": "Updated comment",
    "status": "processed"
  }

# DELETE /applications/:id

- **Метод:** DELETE
- **URL:** `{{host}}/applications/{{id}}`
- **Заголовки:** Нет
- **Тело:** Нет
- **Описание:** Удаляет заявку по ее идентификатору.
- **Параметры:**
  - `id` (число): Идентификатор удаляемой заявки.
- **Ответ:** Нет
- **Ошибки:**
  - `NotFoundException`: Если заявка с указанным идентификатором не найдена.

# DELETE /applications

- **Метод:** DELETE
- **URL:** `{{host}}/applications`
- **Заголовки:** Нет
- **Тело:** Нет
- **Описание:** Удаляет все заявки. Создан исключительно для дебага, исключить из возможного прода
- **Ответ:** Нет
- **Ошибки:** Нет
